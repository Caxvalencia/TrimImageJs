!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n;r.r(e),function(t){t.TOP="TOP",t.RIGHT="RIGHT",t.BOTTOM="BOTTOM",t.LEFT="LEFT"}(n||(n={}));var o=function(){function t(){}return t.create=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},t.context=function(e,r){return t.create(e,r).getContext("2d")},t}(),i=function(){function t(){}return t.getImage=function(e){t.validate(e);var r=e.width,n=e.height,i=o.create(r,n);i.getContext("2d").putImageData(e,0,0);var a=new Image;return a.width=r,a.height=n,a.src=i.toDataURL("image/png"),a},t.getImageData=function(t){var e=t.width,r=t.height,n=o.context(e,r);return n.drawImage(t,0,0,e,r),n.getImageData(0,0,e,r)},t.create=function(t,e){return o.context(t,e).createImageData(t,e)},t.validate=function(t){if("imagedata"!==(e=t,{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()))throw"ImageData Exception: No es compatible el tipo de dato";var e},t}();var a,u=function(){function t(){}return t.create=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src=t})},t}(),c=function(){function t(){}return t.getPixel=function(t){return function(e){return t[e]}},t}(),f=(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.apply=function(e,r,n,o){for(var i=-1,a=!1,u=t.getPixel.call(this,e),c=n,f=r;f>=0;f--){i=f*c;for(var p=c;p>0&&"break"!=(a=o.apply(this,[f,p,{red:u(i-p),green:u(i-p-3),blue:u(i-p-2),alpha:u(i-p-1)}]));p-=4);if("break"==a)break}},e}(c),l=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.apply=function(e,r,n,o){for(var i=-1,a=!1,u=t.getPixel.call(this,e),c=r,f=n,p=0;p<f;p+=4){for(var l=0;l<c&&(i=l*f,"break"!=(a=o.apply(this,[l,p,{red:u(i+p),green:u(i+p+1),blue:u(i+p+2),alpha:u(i+p+3)}])));l++);if("break"==a)break}},e}(c),h=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.apply=function(e,r,n,o){for(var i=-1,a=!1,u=t.getPixel.call(this,e),c=r-1,f=n,p=f;p>0;p-=4){for(var l=c;l>1&&(i=l*f-4+p,"break"!=(a=o.apply(this,[l,p,{red:u(i-3),green:u(i-2),blue:u(i-1),alpha:u(i)}])));l--);if("break"==a)break}},e}(c),m=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.apply=function(e,r,n,o){for(var i=-1,a=!1,u=1,c=4,f=t.getPixel.call(this,e),p=0;p<r;p+=u){i=p*n;for(var l=0;l<n&&"break"!=(a=o.apply(this,[p,l,{red:f(i+l),green:f(i+l+1),blue:f(i+l+2),alpha:f(i+l+3)}]));l+=c);if("break"==a)break}},e}(c),d=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function u(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,u)}c((n=n.apply(t,e||[])).next())})},v=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},b=function(){function t(t,e){this.configureImage(t,e)}return t.prototype.configureImage=function(t,e){return d(this,void 0,void 0,function(){var r,n;return v(this,function(o){switch(o.label){case 0:return r=this,"string"!=typeof t?[3,2]:[4,u.create(t)];case 1:return n=o.sent(),[3,3];case 2:n=t,o.label=3;case 3:return r.image=n,void 0!==e&&e.call(this,this.image),[2]}})})},t.trim=function(e,r){return new t(e,r).trim()},t.trimTop=function(e,r){return new t(e,r).trimTop()},t.trimBottom=function(e,r){return new t(e,r).trimBottom()},t.trimLeft=function(e,r){return new t(e,r).trimLeft()},t.trimRight=function(e,r){return new t(e,r).trimRight()},t.prototype.trim=function(){return this.image=i.getImage(this._trim(i.getImageData(this.image))),this},t.prototype.trimTop=function(){return this.image=i.getImage(this._trimTop(i.getImageData(this.image))),this},t.prototype.trimBottom=function(){return this.image=i.getImage(this._trimBottom(i.getImageData(this.image))),this},t.prototype.trimLeft=function(){return this.image=i.getImage(this._trimLeft(i.getImageData(this.image))),this},t.prototype.trimRight=function(){return this.image=i.getImage(this._trimRight(i.getImageData(this.image))),this},t.prototype._trim=function(t){i.validate(t);var e=this._trimTop(t);return e=this._trimBottom(e),e=this._trimLeft(e),e=this._trimRight(e)},t.prototype._trimTop=function(t){var e=0,r=4*t.width,o=t.height;return this.readImageData(n.TOP,t,function(t,r,n){if(0!=n.alpha)return e=t,"break"}),this.cutImageData(t,e,0,o,r)},t.prototype._trimBottom=function(t){var e=t.height,r=4*t.width;return this.readImageData(n.BOTTOM,t,function(t,r,n){if(0!=n.alpha)return e=t,"break"}),this.cutImageData(t,0,0,e,r)},t.prototype._trimLeft=function(t){var e=0,r=4*t.width,o=t.height;return this.readImageData(n.LEFT,t,function(t,r,n){if(0!=n.alpha)return e=r,"break"}),this.cutImageData(t,0,e,o,r)},t.prototype._trimRight=function(t){var e=4*t.width,r=t.height;return this.readImageData(n.RIGHT,t,function(t,r,n){if(0!=n.alpha)return e=r,"break"}),this.cutImageData(t,0,0,r,e)},t.prototype.cutImageData=function(t,e,r,n,o){i.validate(t);var a=t.data,u=4*t.width;n=0==n?1:n,o=0==o?1:o;for(var c=n==e?1:n-e,f=o/4-r/4,p=i.create(f,c),l=u-o,s=0,h=e;h<n;h++)for(var g=h*o+h*l,m=r;m<o;m+=4,s+=4)p.data[s]=a[g+m],p.data[s+1]=a[g+m+1],p.data[s+2]=a[g+m+2],p.data[s+3]=a[g+m+3];return p},t.prototype.readImageData=function(t,e,r){i.validate(e);var o,a=e.data,u=4*e.width,c=e.height;return((o={})[n.TOP]=y.apply,o[n.BOTTOM]=p.apply,o[n.LEFT]=s.apply,o[n.RIGHT]=g.apply,o)[t](a,c,u,r),e},t}();r.d(e,"TrimImage",function(){return b})}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3RhbnRzL3R5cGUtcmVhZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9oZWxwZXJzL2NhbnZhcy5oZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMvaW1hZ2UtZGF0YS5oZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlcnMvaW1hZ2UuaGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9yZWFkZXJzL3JlYWRlci1iYXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9yZWFkZXJzL3JlYWRlci1ib3R0b20udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlYWRlcnMvcmVhZGVyLWxlZnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlYWRlcnMvcmVhZGVyLXJpZ2h0LnRzIiwid2VicGFjazovLy8uL3NyYy9yZWFkZXJzL3JlYWRlci10b3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyaW0taW1hZ2UudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwiYSIsImkiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlR5cGVSZWFkZXIiLCJDYW52YXNIZWxwZXIiLCJjcmVhdGUiLCJ3aWR0aCIsImhlaWdodCIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiaW1hZ2VfZGF0YV9oZWxwZXJfSW1hZ2VEYXRhSGVscGVyIiwiSW1hZ2VEYXRhSGVscGVyIiwiZ2V0SW1hZ2UiLCJpbWFnZURhdGEiLCJ2YWxpZGF0ZSIsImltZ1dpZHRoIiwiaW1nSGVpZ2h0IiwicHV0SW1hZ2VEYXRhIiwiaW1hZ2UiLCJJbWFnZSIsInNyYyIsInRvRGF0YVVSTCIsImdldEltYWdlRGF0YSIsImRyYXdJbWFnZSIsImNyZWF0ZUltYWdlRGF0YSIsImVsZW1lbnQiLCJ0b1N0cmluZyIsIm1hdGNoIiwidG9Mb3dlckNhc2UiLCJJbWFnZUhlbHBlciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaW1nIiwib25sb2FkIiwib25lcnJvciIsIlJlYWRlckJhc2UiLCJnZXRQaXhlbCIsInBpeGVscyIsImluZGV4IiwicmVhZGVyX2JvdHRvbV9SZWFkZXJCb3R0b20iLCJfc3VwZXIiLCJSZWFkZXJCb3R0b20iLCJyZWFkZXJfYm90dG9tX2V4dGVuZHMiLCJhcHBseSIsImxlblJvdyIsImxlbkNvbCIsImZ1bmNCYWNrIiwicm93Q3VycmVudCIsImlzQnJlYWsiLCJ0aGlzIiwiY29sSW5pIiwicm93IiwiY29sIiwicmVkIiwiZ3JlZW4iLCJibHVlIiwiYWxwaGEiLCJyZWFkZXJfbGVmdF9SZWFkZXJMZWZ0IiwiUmVhZGVyTGVmdCIsInJlYWRlcl9sZWZ0X2V4dGVuZHMiLCJyb3dFbmQiLCJjb2xFbmQiLCJyZWFkZXJfcmlnaHRfUmVhZGVyUmlnaHQiLCJSZWFkZXJSaWdodCIsInJlYWRlcl9yaWdodF9leHRlbmRzIiwicm93SW5pIiwicmVhZGVyX3RvcF9SZWFkZXJUb3AiLCJSZWFkZXJUb3AiLCJyZWFkZXJfdG9wX2V4dGVuZHMiLCJpbnRlcmF0b3IiLCJ0cmltX2ltYWdlX1RyaW1JbWFnZSIsIlRyaW1JbWFnZSIsImZ1bmNMb2FkQmFjayIsImNvbmZpZ3VyZUltYWdlIiwiY2FsbGJhY2siLCJfYSIsIl9iIiwiX2MiLCJzZW50IiwidW5kZWZpbmVkIiwidHJpbSIsInRyaW1Ub3AiLCJ0cmltQm90dG9tIiwidHJpbUxlZnQiLCJ0cmltUmlnaHQiLCJfdHJpbSIsIl90cmltVG9wIiwiX3RyaW1Cb3R0b20iLCJfdHJpbUxlZnQiLCJfdHJpbVJpZ2h0IiwidHJpbW1lZEltYWdlIiwibGVuZ2h0Q29sIiwibGVuZ2h0Um93IiwicmVhZEltYWdlRGF0YSIsIlRPUCIsIl9yb3ciLCJfY29sIiwicmdiYSIsImN1dEltYWdlRGF0YSIsIkJPVFRPTSIsImNvbHVtbiIsIkxFRlQiLCJSSUdIVCIsInJvd0ZpbiIsImNvbEZpbiIsImRhdGEiLCJsZW5fY29sIiwiY29weUhlaWdodCIsImNvcHlXaWR0aCIsImNvcHlJbWFnZURhdGEiLCJkaWZmQ29sIiwiY291bnRDb3B5IiwidHlwZVJlYWRlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxvQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsU0FDQSxzQkFBQUcsZUFBQUMsSUFDQUQsVUFBQUgsT0FDQSxDQUNBLElBQUFLLEVBQUFMLElBQ0EsUUFBQU0sS0FBQUQsR0FBQSxpQkFBQUosZ0JBQUFGLEdBQUFPLEdBQUFELEVBQUFDLElBUEEsQ0FTQ0MsT0FBQSxXQUNELG1CQ1RBLElBQUFDLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFULFFBR0EsSUFBQUMsRUFBQU0sRUFBQUUsSUFDQUosRUFBQUksRUFDQUMsR0FBQSxFQUNBVixZQVVBLE9BTkFXLEVBQUFGLEdBQUFHLEtBQUFYLEVBQUFELFFBQUFDLElBQUFELFFBQUFRLEdBR0FQLEVBQUFTLEdBQUEsRUFHQVQsRUFBQUQsUUEyQ0EsT0F0Q0FRLEVBQUFLLEVBQUFGLEVBR0FILEVBQUFNLEVBQUFQLEVBR0FDLEVBQUFPLEVBQUEsU0FBQWYsRUFBQWdCLEVBQUFDLEdBQ0FULEVBQUFVLEVBQUFsQixFQUFBZ0IsSUFDQUcsT0FBQUMsZUFBQXBCLEVBQUFnQixHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVQsRUFBQWdCLEVBQUEsU0FBQXhCLEdBQ0FtQixPQUFBQyxlQUFBcEIsRUFBQSxjQUFpRHlCLE9BQUEsS0FJakRqQixFQUFBa0IsRUFBQSxTQUFBekIsR0FDQSxJQUFBZ0IsRUFBQWhCLEtBQUEwQixXQUNBLFdBQTJCLE9BQUExQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFPLEVBQUFPLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVQsRUFBQVUsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REckIsRUFBQXdCLEVBQUEsR0FJQXhCLElBQUF5QixFQUFBLGtDQ25FQSxJQUFZQyxTQUFaLFNBQVlBLEdBQ1JBLEVBQUEsVUFDQUEsRUFBQSxjQUNBQSxFQUFBLGdCQUNBQSxFQUFBLFlBSkosQ0FBWUEsV0NBWixJQUFBQyxFQUFBLG9CQUFBQSxLQXdCQSxPQWpCV0EsRUFBQUMsT0FBUCxTQUFjQyxFQUFlQyxHQUN6QixJQUFJQyxFQUFTQyxTQUFTQyxjQUFjLFVBSXBDLE9BSEFGLEVBQU9GLE1BQVFBLEVBQ2ZFLEVBQU9ELE9BQVNBLEVBRVRDLEdBU0pKLEVBQUFPLFFBQVAsU0FBZUwsRUFBZUMsR0FDMUIsT0FBT0gsRUFBYUMsT0FBT0MsRUFBT0MsR0FBUUssV0FBVyxPQUU3RFIsRUF4QkEsR0NFQVMsRUFBQSxvQkFBQUMsS0E0REEsT0F0RFdBLEVBQUFDLFNBQVAsU0FBZ0JDLEdBQ1pGLEVBQWdCRyxTQUFTRCxHQUV6QixJQUFJRSxFQUFXRixFQUFVVixNQUNyQmEsRUFBWUgsRUFBVVQsT0FFdEJDLEVBQVNKLEVBQWFDLE9BQU9hLEVBQVVDLEdBQzNDWCxFQUFPSSxXQUFXLE1BQU1RLGFBQWFKLEVBQVcsRUFBRyxHQUVuRCxJQUFJSyxFQUFRLElBQUlDLE1BS2hCLE9BSkFELEVBQU1mLE1BQVFZLEVBQ2RHLEVBQU1kLE9BQVNZLEVBQ2ZFLEVBQU1FLElBQU1mLEVBQU9nQixVQUFVLGFBRXRCSCxHQVFKUCxFQUFBVyxhQUFQLFNBQW9CSixHQUNoQixJQUFJSCxFQUFXRyxFQUFNZixNQUNqQmEsRUFBWUUsRUFBTWQsT0FFbEJJLEVBQVVQLEVBQWFPLFFBQVFPLEVBQVVDLEdBRzdDLE9BRkFSLEVBQVFlLFVBQVVMLEVBQU8sRUFBRyxFQUFHSCxFQUFVQyxHQUVsQ1IsRUFBUWMsYUFBYSxFQUFHLEVBQUdQLEVBQVVDLElBU3pDTCxFQUFBVCxPQUFQLFNBQWNDLEVBQWVDLEdBQ3pCLE9BQU9ILEVBQWFPLFFBQVFMLEVBQU9DLEdBQVFvQixnQkFDdkNyQixFQUNBQyxJQVFETyxFQUFBRyxTQUFQLFNBQWdCRCxHQUNaLEdBQXNCLGVBTWxCWSxFQU5HWixLQU9EYSxTQUNMaEQsS0FBSytDLEdBQ0xFLE1BQU0sa0JBQWtCLEdBQ3hCQyxlQVRHLEtBQU0sd0RBS2xCLElBQVlILEdBRlpkLEVBNURBLEdDRkEsTUFBQWtCLEVBQUEsb0JBQUFBLEtBYUEsT0FSV0EsRUFBQTNCLE9BQVAsU0FBY2tCLEdBQ1YsT0FBTyxJQUFJVSxRQUFRLFNBQUNDLEVBQVNDLEdBQ3pCLElBQUlDLEVBQU0sSUFBSWQsTUFDZGMsRUFBSUMsT0FBUyxXQUFNLE9BQUFILEVBQVFFLElBQzNCQSxFQUFJRSxRQUFVSCxFQUNkQyxFQUFJYixJQUFNQSxLQUd0QlMsRUFiQSxHQ0FBTyxFQUFBLG9CQUFBQSxLQVdBLE9BTFdBLEVBQUFDLFNBQVAsU0FBZ0JDLEdBQ1osT0FBTyxTQUFDQyxHQUNKLE9BQU9ELEVBQU9DLEtBRzFCSCxFQVhBLHlSQ0dBSSxFQUFBLFNBQUFDLEdBQUEsU0FBQUMsbURBMkNBLE9BM0NrQ0MsRUFBQUQsRUFBQUQsR0FRdkJDLEVBQUFFLE1BQVAsU0FBYU4sRUFBUU8sRUFBUUMsRUFBUUMsR0FVakMsSUFUQSxJQUFJQyxHQUFjLEVBQ2RDLEdBQWUsRUFDZlosRUFBV0ksRUFBTUosU0FBUTNELEtBQUF3RSxLQUFDWixHQUkxQmEsRUFBU0wsRUFHSk0sRUFMSVAsRUFLVU8sR0FKVixFQUl5QkEsSUFBTyxDQUN6Q0osRUFBYUksRUFBTUQsRUFFbkIsSUFBSyxJQUFJRSxFQUFNRixFQUFRRSxFQUxkLEdBaUJVLFVBWGZKLEVBQVVGLEVBQVNILE1BQU1NLE1BQ3JCRSxFQUNBQyxHQUVJQyxJQUFLakIsRUFBU1csRUFBYUssR0FDM0JFLE1BQU9sQixFQUFTVyxFQUFhSyxFQUFNLEdBQ25DRyxLQUFNbkIsRUFBU1csRUFBYUssRUFBTSxHQUNsQ0ksTUFBT3BCLEVBQVNXLEVBQWFLLEVBQU0sT0FSVkEsR0FBTyxHQWlCNUMsR0FBZSxTQUFYSixFQUNBLFFBSWhCUCxFQTNDQSxDQUFrQ04sZ1RDQWxDc0IsRUFBQSxTQUFBakIsR0FBQSxTQUFBa0IsbURBMkNBLE9BM0NnQ0MsRUFBQUQsRUFBQWxCLEdBUXJCa0IsRUFBQWYsTUFBUCxTQUFhTixFQUFRTyxFQUFRQyxFQUFRQyxHQVVqQyxJQVRBLElBQUlDLEdBQWMsRUFDZEMsR0FBZSxFQUNmWixFQUFXSSxFQUFNSixTQUFRM0QsS0FBQXdFLEtBQUNaLEdBRzFCdUIsRUFBU2hCLEVBRVRpQixFQUFTaEIsRUFFSk8sRUFISyxFQUdVQSxFQUFNUyxFQUFRVCxHQUFPLEVBQUcsQ0FDNUMsSUFBSyxJQUFJRCxFQU5DLEVBTWNBLEVBQU1TLElBQzFCYixFQUFhSSxFQUFNVSxFQWFKLFVBWGZiLEVBQVVGLEVBQVNILE1BQU1NLE1BQ3JCRSxFQUNBQyxHQUVJQyxJQUFLakIsRUFBU1csRUFBYUssR0FDM0JFLE1BQU9sQixFQUFTVyxFQUFhSyxFQUFNLEdBQ25DRyxLQUFNbkIsRUFBU1csRUFBYUssRUFBTSxHQUNsQ0ksTUFBT3BCLEVBQVNXLEVBQWFLLEVBQU0sUUFWVEQsS0FtQnRDLEdBQWUsU0FBWEgsRUFDQSxRQUloQlUsRUEzQ0EsQ0FBZ0N2QixnVENBaEMyQixFQUFBLFNBQUF0QixHQUFBLFNBQUF1QixtREEyQ0EsT0EzQ2lDQyxFQUFBRCxFQUFBdkIsR0FRdEJ1QixFQUFBcEIsTUFBUCxTQUFhTixFQUFRTyxFQUFRQyxFQUFRQyxHQVVqQyxJQVRBLElBQUlDLEdBQWMsRUFDZEMsR0FBZSxFQUNmWixFQUFXSSxFQUFNSixTQUFRM0QsS0FBQXdFLEtBQUNaLEdBRTFCNEIsRUFBU3JCLEVBQVMsRUFFbEJNLEVBQVNMLEVBR0pPLEVBQU1GLEVBQVFFLEVBRlYsRUFFd0JBLEdBQU8sRUFBRyxDQUMzQyxJQUFLLElBQUlELEVBQU1jLEVBQVFkLEVBTGQsSUFNTEosRUFBYUksRUFBTUQsRUFBUyxFQUFJRSxFQWFqQixVQVhmSixFQUFVRixFQUFTSCxNQUFNTSxNQUNyQkUsRUFDQUMsR0FFSUMsSUFBS2pCLEVBQVNXLEVBQWEsR0FDM0JPLE1BQU9sQixFQUFTVyxFQUFhLEdBQzdCUSxLQUFNbkIsRUFBU1csRUFBYSxHQUM1QlMsTUFBT3BCLEVBQVNXLFFBVlNJLEtBbUJyQyxHQUFlLFNBQVhILEVBQ0EsUUFJaEJlLEVBM0NBLENBQWlDNUIsZ1RDQWpDK0IsRUFBQSxTQUFBMUIsR0FBQSxTQUFBMkIsbURBNENBLE9BNUMrQkMsRUFBQUQsRUFBQTNCLEdBUXBCMkIsRUFBQXhCLE1BQVAsU0FBYU4sRUFBUU8sRUFBUUMsRUFBUUMsR0FXakMsSUFWQSxJQUFJQyxHQUFjLEVBQ2RDLEdBQWUsRUFFZnFCLEVBQ0ssRUFETEEsRUFFSyxFQUdMakMsRUFBV0ksRUFBTUosU0FBUTNELEtBQUF3RSxLQUFDWixHQUVyQmMsRUFBTSxFQUFHQSxFQUFNUCxFQUFRTyxHQUFPa0IsRUFBZSxDQUNsRHRCLEVBQWFJLEVBQU1OLEVBRW5CLElBQUssSUFBSU8sRUFBTSxFQUFHQSxFQUFNUCxHQVlMLFVBWGZHLEVBQVVGLEVBQVNILE1BQU1NLE1BQ3JCRSxFQUNBQyxHQUVJQyxJQUFLakIsRUFBU1csRUFBYUssR0FDM0JFLE1BQU9sQixFQUFTVyxFQUFhSyxFQUFNLEdBQ25DRyxLQUFNbkIsRUFBU1csRUFBYUssRUFBTSxHQUNsQ0ksTUFBT3BCLEVBQVNXLEVBQWFLLEVBQU0sT0FSZkEsR0FBT2lCLEdBaUJ2QyxHQUFlLFNBQVhyQixFQUNBLFFBSWhCbUIsRUE1Q0EsQ0FBK0JoQyxneENDVS9CbUMsRUFBQSxXQVNJLFNBQUFDLEVBQVl0RCxFQUF5QnVELEdBQ2pDdkIsS0FBS3dCLGVBQWV4RCxFQUFPdUQsR0EyU25DLE9BaFNVRCxFQUFBNUUsVUFBQThFLGVBQU4sU0FBcUJ4RCxFQUFrQ3lELDBHQUNuREMsRUFBQTFCLEtBQ3FCLGlCQUFWaEMsR0FBUCxNQUNNLEVBQU1XLEVBQVkzQixPQUFPZ0Isa0JBQXpCMkQsRUFBQUMsRUFBQUMsb0JBQ0FGLEVBQWtCM0QsMEJBSDVCMEQsRUFBSzFELE1BQUsyRCxPQUtPRyxJQUFiTCxHQUNBQSxFQUFTakcsS0FBS3dFLEtBQU1BLEtBQUtoQyxpQkFJMUJzRCxFQUFBUyxLQUFQLFNBQVkvRCxFQUFReUQsR0FDaEIsT0FBTyxJQUFJSCxFQUFVdEQsRUFBT3lELEdBQVVNLFFBR25DVCxFQUFBVSxRQUFQLFNBQWVoRSxFQUFReUQsR0FDbkIsT0FBTyxJQUFJSCxFQUFVdEQsRUFBT3lELEdBQVVPLFdBR25DVixFQUFBVyxXQUFQLFNBQWtCakUsRUFBUXlELEdBQ3RCLE9BQU8sSUFBSUgsRUFBVXRELEVBQU95RCxHQUFVUSxjQUduQ1gsRUFBQVksU0FBUCxTQUFnQmxFLEVBQVF5RCxHQUNwQixPQUFPLElBQUlILEVBQVV0RCxFQUFPeUQsR0FBVVMsWUFHbkNaLEVBQUFhLFVBQVAsU0FBaUJuRSxFQUFReUQsR0FDckIsT0FBTyxJQUFJSCxFQUFVdEQsRUFBT3lELEdBQVVVLGFBTTFDYixFQUFBNUUsVUFBQXFGLEtBQUEsV0FLSSxPQUpBL0IsS0FBS2hDLE1BQVFSLEVBQWdCRSxTQUN6QnNDLEtBQUtvQyxNQUFNNUUsRUFBZ0JZLGFBQWE0QixLQUFLaEMsU0FHMUNnQyxNQVFYc0IsRUFBQTVFLFVBQUFzRixRQUFBLFdBS0ksT0FKQWhDLEtBQUtoQyxNQUFRUixFQUFnQkUsU0FDekJzQyxLQUFLcUMsU0FBUzdFLEVBQWdCWSxhQUFhNEIsS0FBS2hDLFNBRzdDZ0MsTUFRWHNCLEVBQUE1RSxVQUFBdUYsV0FBQSxXQUtJLE9BSkFqQyxLQUFLaEMsTUFBUVIsRUFBZ0JFLFNBQ3pCc0MsS0FBS3NDLFlBQVk5RSxFQUFnQlksYUFBYTRCLEtBQUtoQyxTQUdoRGdDLE1BUVhzQixFQUFBNUUsVUFBQXdGLFNBQUEsV0FLSSxPQUpBbEMsS0FBS2hDLE1BQVFSLEVBQWdCRSxTQUN6QnNDLEtBQUt1QyxVQUFVL0UsRUFBZ0JZLGFBQWE0QixLQUFLaEMsU0FHOUNnQyxNQU9Yc0IsRUFBQTVFLFVBQUF5RixVQUFBLFdBS0ksT0FKQW5DLEtBQUtoQyxNQUFRUixFQUFnQkUsU0FDekJzQyxLQUFLd0MsV0FBV2hGLEVBQWdCWSxhQUFhNEIsS0FBS2hDLFNBRy9DZ0MsTUFTSHNCLEVBQUE1RSxVQUFBMEYsTUFBUixTQUFjekUsR0FDVkgsRUFBZ0JJLFNBQVNELEdBRXpCLElBQUk4RSxFQUFlekMsS0FBS3FDLFNBQVMxRSxHQUtqQyxPQUpBOEUsRUFBZXpDLEtBQUtzQyxZQUFZRyxHQUNoQ0EsRUFBZXpDLEtBQUt1QyxVQUFVRSxHQUM5QkEsRUFBZXpDLEtBQUt3QyxXQUFXQyxJQVUzQm5CLEVBQUE1RSxVQUFBMkYsU0FBUixTQUFpQjFFLEdBQ2IsSUFBSXVDLEVBQU0sRUFDTndDLEVBQThCLEVBQWxCL0UsRUFBVVYsTUFDdEIwRixFQUFZaEYsRUFBVVQsT0FjMUIsT0FaQThDLEtBQUs0QyxjQUNEOUYsRUFBVytGLElBQ1hsRixFQUNBLFNBQUNtRixFQUFNQyxFQUFNQyxHQUNULEdBQWtCLEdBQWRBLEVBQUt6QyxNQUdMLE9BRkFMLEVBQU00QyxFQUVDLFVBS1o5QyxLQUFLaUQsYUFBYXRGLEVBQVd1QyxFQUFLLEVBQUd5QyxFQUFXRCxJQVFuRHBCLEVBQUE1RSxVQUFBNEYsWUFBUixTQUFvQjNFLEdBQ2hCLElBQUlnRixFQUFZaEYsRUFBVVQsT0FDdEJ3RixFQUE4QixFQUFsQi9FLEVBQVVWLE1BYzFCLE9BWkErQyxLQUFLNEMsY0FDRDlGLEVBQVdvRyxPQUNYdkYsRUFDQSxTQUFDbUYsRUFBTUMsRUFBTUMsR0FDVCxHQUFrQixHQUFkQSxFQUFLekMsTUFHTCxPQUZBb0MsRUFBWUcsRUFFTCxVQUtaOUMsS0FBS2lELGFBQWF0RixFQUFXLEVBQUcsRUFBR2dGLEVBQVdELElBUWpEcEIsRUFBQTVFLFVBQUE2RixVQUFSLFNBQWtCNUUsR0FDZCxJQUFJd0YsRUFBUyxFQUNUVCxFQUE4QixFQUFsQi9FLEVBQVVWLE1BQ3RCMEYsRUFBWWhGLEVBQVVULE9BYzFCLE9BWkE4QyxLQUFLNEMsY0FDRDlGLEVBQVdzRyxLQUNYekYsRUFDQSxTQUFDbUYsRUFBTUMsRUFBTUMsR0FDVCxHQUFrQixHQUFkQSxFQUFLekMsTUFHTCxPQUZBNEMsRUFBU0osRUFFRixVQUtaL0MsS0FBS2lELGFBQWF0RixFQUFXLEVBQUd3RixFQUFRUixFQUFXRCxJQVF0RHBCLEVBQUE1RSxVQUFBOEYsV0FBUixTQUFtQjdFLEdBQ2YsSUFBSWlDLEVBQTJCLEVBQWxCakMsRUFBVVYsTUFDbkIwQyxFQUFTaEMsRUFBVVQsT0FjdkIsT0FaQThDLEtBQUs0QyxjQUNEOUYsRUFBV3VHLE1BQ1gxRixFQUNBLFNBQUNtRixFQUFNQyxFQUFNQyxHQUNULEdBQWtCLEdBQWRBLEVBQUt6QyxNQUdMLE9BRkFYLEVBQVNtRCxFQUVGLFVBS1ovQyxLQUFLaUQsYUFBYXRGLEVBQVcsRUFBRyxFQUFHZ0MsRUFBUUMsSUFXdEQwQixFQUFBNUUsVUFBQXVHLGFBQUEsU0FDSXRGLEVBQ0FxRCxFQUNBZixFQUNBcUQsRUFDQUMsR0FFQS9GLEVBQWdCSSxTQUFTRCxHQUV6QixJQUFJeUIsRUFBU3pCLEVBQVU2RixLQUNuQkMsRUFBNEIsRUFBbEI5RixFQUFVVixNQUV4QnFHLEVBQW1CLEdBQVZBLEVBQWMsRUFBSUEsRUFDM0JDLEVBQW1CLEdBQVZBLEVBQWMsRUFBSUEsRUFhM0IsSUFYQSxJQUFJRyxFQUFhSixHQUFVdEMsRUFBUyxFQUFJc0MsRUFBU3RDLEVBQzdDMkMsRUFBWUosRUFBUyxFQUFJdEQsRUFBUyxFQUVsQzJELEVBQTJCcEcsRUFBZ0JSLE9BQzNDMkcsRUFDQUQsR0FHQUcsRUFBVUosRUFBVUYsRUFDcEJPLEVBQVksRUFFUDVELEVBQU1jLEVBQVFkLEVBQU1vRCxFQUFRcEQsSUFHakMsSUFGQSxJQUFJSixFQUFhSSxFQUFNcUQsRUFBU3JELEVBQU0yRCxFQUU3QjFELEVBQU1GLEVBQVFFLEVBQU1vRCxFQUFRcEQsR0FBTyxFQUFHMkQsR0FBYSxFQUN4REYsRUFBY0osS0FBS00sR0FBYTFFLEVBQU9VLEVBQWFLLEdBQ3BEeUQsRUFBY0osS0FBS00sRUFBWSxHQUMzQjFFLEVBQU9VLEVBQWFLLEVBQU0sR0FDOUJ5RCxFQUFjSixLQUFLTSxFQUFZLEdBQzNCMUUsRUFBT1UsRUFBYUssRUFBTSxHQUM5QnlELEVBQWNKLEtBQUtNLEVBQVksR0FDM0IxRSxFQUFPVSxFQUFhSyxFQUFNLEdBSXRDLE9BQU95RCxHQVVIdEMsRUFBQTVFLFVBQUFrRyxjQUFSLFNBQ0ltQixFQUNBcEcsRUFDQWtDLEdBRUFyQyxFQUFnQkksU0FBU0QsR0FFekIsTUFBSXlCLEVBQVN6QixFQUFVNkYsS0FDbkI1RCxFQUEyQixFQUFsQmpDLEVBQVVWLE1BQ25CMEMsRUFBU2hDLEVBQVVULE9BV3ZCLFFBVFV3RSxNQUNMNUUsRUFBVytGLEtBQU01QixFQUFVdkIsTUFDNUJnQyxFQUFDNUUsRUFBV29HLFFBQVM1RCxFQUFhSSxNQUNsQ2dDLEVBQUM1RSxFQUFXc0csTUFBTzVDLEVBQVdkLE1BQzlCZ0MsRUFBQzVFLEVBQVd1RyxPQUFReEMsRUFBWW5CLFNBRzdCcUUsR0FBWTNFLEVBQVFPLEVBQVFDLEVBQVFDLEdBRXBDbEMsR0FFZjJELEVBclRBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgZW51bSBUeXBlUmVhZGVyIHtcbiAgICBUT1AgPSAnVE9QJyxcbiAgICBSSUdIVCA9ICdSSUdIVCcsXG4gICAgQk9UVE9NID0gJ0JPVFRPTScsXG4gICAgTEVGVCA9ICdMRUZUJ1xufVxuIiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhbnZhc0hlbHBlciB7XG4gICAgLyoqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICAgKiBAcmV0dXJucyB7SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IEhUTUxDYW52YXNFbGVtZW50IHtcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XG4gICAgICogQHJldHVybnMge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICBzdGF0aWMgY29udGV4dCh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XG4gICAgICAgIHJldHVybiBDYW52YXNIZWxwZXIuY3JlYXRlKHdpZHRoLCBoZWlnaHQpLmdldENvbnRleHQoJzJkJyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ2FudmFzSGVscGVyIH0gZnJvbSAnLi9jYW52YXMuaGVscGVyJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEltYWdlRGF0YUhlbHBlciB7XG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIC0gQ29udmllcnRlIHVuIGltYWdlRGF0YSBvYmplY3QgYSB1biBpbWFnZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge0ltYWdlRGF0YX0gaW1hZ2VEYXRhIC0gT2JqZXRvIGNvbiBtYXRyaXogZGUgZGF0b3MgZGUgbGEgaW1hZ2VuXG4gICAgICogQHJldHVybiB7SFRNTEltYWdlRWxlbWVudH1cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0SW1hZ2UoaW1hZ2VEYXRhOiBJbWFnZURhdGEpIHtcbiAgICAgICAgSW1hZ2VEYXRhSGVscGVyLnZhbGlkYXRlKGltYWdlRGF0YSk7XG5cbiAgICAgICAgbGV0IGltZ1dpZHRoID0gaW1hZ2VEYXRhLndpZHRoO1xuICAgICAgICBsZXQgaW1nSGVpZ2h0ID0gaW1hZ2VEYXRhLmhlaWdodDtcblxuICAgICAgICBsZXQgY2FudmFzID0gQ2FudmFzSGVscGVyLmNyZWF0ZShpbWdXaWR0aCwgaW1nSGVpZ2h0KTtcbiAgICAgICAgY2FudmFzLmdldENvbnRleHQoJzJkJykucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG5cbiAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlLndpZHRoID0gaW1nV2lkdGg7XG4gICAgICAgIGltYWdlLmhlaWdodCA9IGltZ0hlaWdodDtcbiAgICAgICAgaW1hZ2Uuc3JjID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG5cbiAgICAgICAgcmV0dXJuIGltYWdlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR9IGltYWdlXG4gICAgICogQHJldHVybnMge0ltYWdlRGF0YX1cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0SW1hZ2VEYXRhKGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50KTogSW1hZ2VEYXRhIHtcbiAgICAgICAgbGV0IGltZ1dpZHRoID0gaW1hZ2Uud2lkdGg7XG4gICAgICAgIGxldCBpbWdIZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG5cbiAgICAgICAgbGV0IGNvbnRleHQgPSBDYW52YXNIZWxwZXIuY29udGV4dChpbWdXaWR0aCwgaW1nSGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGltZ1dpZHRoLCBpbWdIZWlnaHQpO1xuXG4gICAgICAgIHJldHVybiBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbWdXaWR0aCwgaW1nSGVpZ2h0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgICAqIEByZXR1cm5zIHtJbWFnZURhdGF9XG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IEltYWdlRGF0YSB7XG4gICAgICAgIHJldHVybiBDYW52YXNIZWxwZXIuY29udGV4dCh3aWR0aCwgaGVpZ2h0KS5jcmVhdGVJbWFnZURhdGEoXG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge0ltYWdlRGF0YX0gaW1hZ2VEYXRhXG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlKGltYWdlRGF0YTogSW1hZ2VEYXRhKSB7XG4gICAgICAgIGlmIChpcyhpbWFnZURhdGEpICE9PSAnaW1hZ2VkYXRhJykge1xuICAgICAgICAgICAgdGhyb3cgJ0ltYWdlRGF0YSBFeGNlcHRpb246IE5vIGVzIGNvbXBhdGlibGUgZWwgdGlwbyBkZSBkYXRvJztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaXMoZWxlbWVudCkge1xuICAgIHJldHVybiB7fS50b1N0cmluZ1xuICAgICAgICAuY2FsbChlbGVtZW50KVxuICAgICAgICAubWF0Y2goL1xccyhbYS16fEEtWl0rKS8pWzFdXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpO1xufVxuIiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIEltYWdlSGVscGVyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjXG4gICAgICogQHJldHVybnMge1Byb21pc2U8SFRNTEltYWdlRWxlbWVudD59XG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShzcmM6IHN0cmluZyk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1nKTtcbiAgICAgICAgICAgIGltZy5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICAgICAgaW1nLnNyYyA9IHNyYztcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFJlYWRlckJhc2Uge1xuICAgIC8qKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge2FueX0gcGl4ZWxzIFxuICAgICAqIEByZXR1cm5zICBcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0UGl4ZWwocGl4ZWxzKSB7XG4gICAgICAgIHJldHVybiAoaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwaXhlbHNbaW5kZXhdO1xuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbG9yUkdCQSB9IGZyb20gJy4uL2NvbnRyYWN0cy9jb2xvci1yZ2JhJztcbmltcG9ydCB7IFJlYWRlckJhc2UgfSBmcm9tICcuL3JlYWRlci1iYXNlJztcblxuZXhwb3J0IGNsYXNzIFJlYWRlckJvdHRvbSBleHRlbmRzIFJlYWRlckJhc2Uge1xuICAgIC8qKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAcGFyYW0ge2FueX0gcGl4ZWxzXG4gICAgICogQHBhcmFtIHthbnl9IGxlblJvd1xuICAgICAqIEBwYXJhbSB7YW55fSBsZW5Db2xcbiAgICAgKiBAcGFyYW0ge2FueX0gZnVuY0JhY2tcbiAgICAgKi9cbiAgICBzdGF0aWMgYXBwbHkocGl4ZWxzLCBsZW5Sb3csIGxlbkNvbCwgZnVuY0JhY2spIHtcbiAgICAgICAgbGV0IHJvd0N1cnJlbnQgPSAtMTtcbiAgICAgICAgbGV0IGlzQnJlYWs6IGFueSA9IGZhbHNlO1xuICAgICAgICBsZXQgZ2V0UGl4ZWwgPSBzdXBlci5nZXRQaXhlbChwaXhlbHMpO1xuXG4gICAgICAgIGxldCByb3dJbmkgPSBsZW5Sb3c7XG4gICAgICAgIGxldCByb3dGaW4gPSAwO1xuICAgICAgICBsZXQgY29sSW5pID0gbGVuQ29sO1xuICAgICAgICBsZXQgY29sRmluID0gMDtcblxuICAgICAgICBmb3IgKGxldCByb3cgPSByb3dJbmk7IHJvdyA+PSByb3dGaW47IHJvdy0tKSB7XG4gICAgICAgICAgICByb3dDdXJyZW50ID0gcm93ICogY29sSW5pO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb2wgPSBjb2xJbmk7IGNvbCA+IGNvbEZpbjsgY29sIC09IDQpIHtcbiAgICAgICAgICAgICAgICBpc0JyZWFrID0gZnVuY0JhY2suYXBwbHkodGhpcywgW1xuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgICAgICAgPENvbG9yUkdCQT57XG4gICAgICAgICAgICAgICAgICAgICAgICByZWQ6IGdldFBpeGVsKHJvd0N1cnJlbnQgLSBjb2wpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JlZW46IGdldFBpeGVsKHJvd0N1cnJlbnQgLSBjb2wgLSAzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsdWU6IGdldFBpeGVsKHJvd0N1cnJlbnQgLSBjb2wgLSAyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhOiBnZXRQaXhlbChyb3dDdXJyZW50IC0gY29sIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzQnJlYWsgPT0gJ2JyZWFrJykge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0JyZWFrID09ICdicmVhaycpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBDb2xvclJHQkEgfSBmcm9tICcuLi9jb250cmFjdHMvY29sb3ItcmdiYSc7XG5pbXBvcnQgeyBSZWFkZXJCYXNlIH0gZnJvbSAnLi9yZWFkZXItYmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBSZWFkZXJMZWZ0IGV4dGVuZHMgUmVhZGVyQmFzZSB7XG4gICAgLyoqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7YW55fSBwaXhlbHNcbiAgICAgKiBAcGFyYW0ge2FueX0gbGVuUm93XG4gICAgICogQHBhcmFtIHthbnl9IGxlbkNvbFxuICAgICAqIEBwYXJhbSB7YW55fSBmdW5jQmFja1xuICAgICAqL1xuICAgIHN0YXRpYyBhcHBseShwaXhlbHMsIGxlblJvdywgbGVuQ29sLCBmdW5jQmFjaykge1xuICAgICAgICBsZXQgcm93Q3VycmVudCA9IC0xO1xuICAgICAgICBsZXQgaXNCcmVhazogYW55ID0gZmFsc2U7XG4gICAgICAgIGxldCBnZXRQaXhlbCA9IHN1cGVyLmdldFBpeGVsKHBpeGVscyk7XG5cbiAgICAgICAgbGV0IHJvd0luaXQgPSAwO1xuICAgICAgICBsZXQgcm93RW5kID0gbGVuUm93O1xuICAgICAgICBsZXQgY29sSW5pdCA9IDA7XG4gICAgICAgIGxldCBjb2xFbmQgPSBsZW5Db2w7XG5cbiAgICAgICAgZm9yIChsZXQgY29sID0gY29sSW5pdDsgY29sIDwgY29sRW5kOyBjb2wgKz0gNCkge1xuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gcm93SW5pdDsgcm93IDwgcm93RW5kOyByb3crKykge1xuICAgICAgICAgICAgICAgIHJvd0N1cnJlbnQgPSByb3cgKiBjb2xFbmQ7XG5cbiAgICAgICAgICAgICAgICBpc0JyZWFrID0gZnVuY0JhY2suYXBwbHkodGhpcywgW1xuICAgICAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgICAgICAgPENvbG9yUkdCQT57XG4gICAgICAgICAgICAgICAgICAgICAgICByZWQ6IGdldFBpeGVsKHJvd0N1cnJlbnQgKyBjb2wpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JlZW46IGdldFBpeGVsKHJvd0N1cnJlbnQgKyBjb2wgKyAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsdWU6IGdldFBpeGVsKHJvd0N1cnJlbnQgKyBjb2wgKyAyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhOiBnZXRQaXhlbChyb3dDdXJyZW50ICsgY29sICsgMylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzQnJlYWsgPT0gJ2JyZWFrJykge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0JyZWFrID09ICdicmVhaycpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbG9yUkdCQSB9IGZyb20gJy4uL2NvbnRyYWN0cy9jb2xvci1yZ2JhJztcbmltcG9ydCB7IFJlYWRlckJhc2UgfSBmcm9tICcuL3JlYWRlci1iYXNlJztcblxuZXhwb3J0IGNsYXNzIFJlYWRlclJpZ2h0IGV4dGVuZHMgUmVhZGVyQmFzZSB7XG4gICAgLyoqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7YW55fSBwaXhlbHNcbiAgICAgKiBAcGFyYW0ge2FueX0gbGVuUm93XG4gICAgICogQHBhcmFtIHthbnl9IGxlbkNvbFxuICAgICAqIEBwYXJhbSB7YW55fSBmdW5jQmFja1xuICAgICAqL1xuICAgIHN0YXRpYyBhcHBseShwaXhlbHMsIGxlblJvdywgbGVuQ29sLCBmdW5jQmFjaykge1xuICAgICAgICBsZXQgcm93Q3VycmVudCA9IC0xO1xuICAgICAgICBsZXQgaXNCcmVhazogYW55ID0gZmFsc2U7XG4gICAgICAgIGxldCBnZXRQaXhlbCA9IHN1cGVyLmdldFBpeGVsKHBpeGVscyk7XG5cbiAgICAgICAgbGV0IHJvd0luaSA9IGxlblJvdyAtIDE7XG4gICAgICAgIGxldCByb3dGaW4gPSAxO1xuICAgICAgICBsZXQgY29sSW5pID0gbGVuQ29sO1xuICAgICAgICBsZXQgY29sRmluID0gMDtcblxuICAgICAgICBmb3IgKGxldCBjb2wgPSBjb2xJbmk7IGNvbCA+IGNvbEZpbjsgY29sIC09IDQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IHJvd0luaTsgcm93ID4gcm93RmluOyByb3ctLSkge1xuICAgICAgICAgICAgICAgIHJvd0N1cnJlbnQgPSByb3cgKiBjb2xJbmkgLSA0ICsgY29sO1xuXG4gICAgICAgICAgICAgICAgaXNCcmVhayA9IGZ1bmNCYWNrLmFwcGx5KHRoaXMsIFtcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBjb2wsXG4gICAgICAgICAgICAgICAgICAgIDxDb2xvclJHQkE+e1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVkOiBnZXRQaXhlbChyb3dDdXJyZW50IC0gMyksXG4gICAgICAgICAgICAgICAgICAgICAgICBncmVlbjogZ2V0UGl4ZWwocm93Q3VycmVudCAtIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmx1ZTogZ2V0UGl4ZWwocm93Q3VycmVudCAtIDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGE6IGdldFBpeGVsKHJvd0N1cnJlbnQpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0JyZWFrID09ICdicmVhaycpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNCcmVhayA9PSAnYnJlYWsnKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb2xvclJHQkEgfSBmcm9tICcuLi9jb250cmFjdHMvY29sb3ItcmdiYSc7XG5pbXBvcnQgeyBSZWFkZXJCYXNlIH0gZnJvbSAnLi9yZWFkZXItYmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBSZWFkZXJUb3AgZXh0ZW5kcyBSZWFkZXJCYXNlIHtcbiAgICAvKipcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHthbnl9IHBpeGVsc1xuICAgICAqIEBwYXJhbSB7YW55fSBsZW5Sb3dcbiAgICAgKiBAcGFyYW0ge2FueX0gbGVuQ29sXG4gICAgICogQHBhcmFtIHthbnl9IGZ1bmNCYWNrXG4gICAgICovXG4gICAgc3RhdGljIGFwcGx5KHBpeGVscywgbGVuUm93LCBsZW5Db2wsIGZ1bmNCYWNrKSB7XG4gICAgICAgIGxldCByb3dDdXJyZW50ID0gLTE7XG4gICAgICAgIGxldCBpc0JyZWFrOiBhbnkgPSBmYWxzZTtcblxuICAgICAgICBsZXQgaW50ZXJhdG9yID0ge1xuICAgICAgICAgICAgcm93OiAxLFxuICAgICAgICAgICAgY29sOiA0XG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGdldFBpeGVsID0gc3VwZXIuZ2V0UGl4ZWwocGl4ZWxzKTtcblxuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBsZW5Sb3c7IHJvdyArPSBpbnRlcmF0b3Iucm93KSB7XG4gICAgICAgICAgICByb3dDdXJyZW50ID0gcm93ICogbGVuQ29sO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCBsZW5Db2w7IGNvbCArPSBpbnRlcmF0b3IuY29sKSB7XG4gICAgICAgICAgICAgICAgaXNCcmVhayA9IGZ1bmNCYWNrLmFwcGx5KHRoaXMsIFtcbiAgICAgICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgICAgICBjb2wsXG4gICAgICAgICAgICAgICAgICAgIDxDb2xvclJHQkE+e1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVkOiBnZXRQaXhlbChyb3dDdXJyZW50ICsgY29sKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyZWVuOiBnZXRQaXhlbChyb3dDdXJyZW50ICsgY29sICsgMSksXG4gICAgICAgICAgICAgICAgICAgICAgICBibHVlOiBnZXRQaXhlbChyb3dDdXJyZW50ICsgY29sICsgMiksXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTogZ2V0UGl4ZWwocm93Q3VycmVudCArIGNvbCArIDMpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0JyZWFrID09ICdicmVhaycpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNCcmVhayA9PSAnYnJlYWsnKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBUeXBlUmVhZGVyIH0gZnJvbSAnLi9jb25zdGFudHMvdHlwZS1yZWFkZXInO1xuaW1wb3J0IHsgQ29sb3JSR0JBIH0gZnJvbSAnLi9jb250cmFjdHMvY29sb3ItcmdiYSc7XG5pbXBvcnQgeyBJbWFnZURhdGFIZWxwZXIgfSBmcm9tICcuL2hlbHBlcnMvaW1hZ2UtZGF0YS5oZWxwZXInO1xuaW1wb3J0IHsgSW1hZ2VIZWxwZXIgfSBmcm9tICcuL2hlbHBlcnMvaW1hZ2UuaGVscGVyJztcbmltcG9ydCB7IFJlYWRlckJvdHRvbSB9IGZyb20gJy4vcmVhZGVycy9yZWFkZXItYm90dG9tJztcbmltcG9ydCB7IFJlYWRlckxlZnQgfSBmcm9tICcuL3JlYWRlcnMvcmVhZGVyLWxlZnQnO1xuaW1wb3J0IHsgUmVhZGVyUmlnaHQgfSBmcm9tICcuL3JlYWRlcnMvcmVhZGVyLXJpZ2h0JztcbmltcG9ydCB7IFJlYWRlclRvcCB9IGZyb20gJy4vcmVhZGVycy9yZWFkZXItdG9wJztcblxuLyoqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgVHJpbUltYWdlXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmltSW1hZ2Uge1xuICAgIHByaXZhdGUgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFRyaW1JbWFnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudH0gaW1hZ2UgSW1hZ2VuIGEgcHJvY2VzYXJcbiAgICAgKiBAcGFyYW0ge2FueX0gZnVuY0xvYWRCYWNrIEZ1bmNpw7NuIGJhY2sgcGFyYSBlbCBsb2FkIGRlIGxhIGltYWdlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBmdW5jTG9hZEJhY2spIHtcbiAgICAgICAgdGhpcy5jb25maWd1cmVJbWFnZShpbWFnZSwgZnVuY0xvYWRCYWNrKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gLSBDb25maWd1cmEgZWwgcGFyYW1ldHJvIGRlIGVudHJhZGEgXCJpbWFnZVwiIGRlbCBjb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtbaW1hZ2Ugb2JqZWN0LCBTdHJpbmddfSBpbWFnZSAtIEltYWdlbiBhIHRyYXRhclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRnVuY2lvbiBjYWxsYmFja1xuICAgICAqXG4gICAgICogQHJldHVybiB7aW1hZ2VEYXRhIG9iamVjdH1cbiAgICAgKi9cbiAgICBhc3luYyBjb25maWd1cmVJbWFnZShpbWFnZTogc3RyaW5nIHwgSFRNTEltYWdlRWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5pbWFnZSA9XG4gICAgICAgICAgICB0eXBlb2YgaW1hZ2UgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyBhd2FpdCBJbWFnZUhlbHBlci5jcmVhdGUoaW1hZ2UpXG4gICAgICAgICAgICAgICAgOiA8SFRNTEltYWdlRWxlbWVudD5pbWFnZTtcblxuICAgICAgICBpZiAoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCB0aGlzLmltYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyB0cmltKGltYWdlPywgY2FsbGJhY2s/KSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJpbUltYWdlKGltYWdlLCBjYWxsYmFjaykudHJpbSgpO1xuICAgIH1cblxuICAgIHN0YXRpYyB0cmltVG9wKGltYWdlPywgY2FsbGJhY2s/KSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJpbUltYWdlKGltYWdlLCBjYWxsYmFjaykudHJpbVRvcCgpO1xuICAgIH1cblxuICAgIHN0YXRpYyB0cmltQm90dG9tKGltYWdlPywgY2FsbGJhY2s/KSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJpbUltYWdlKGltYWdlLCBjYWxsYmFjaykudHJpbUJvdHRvbSgpO1xuICAgIH1cblxuICAgIHN0YXRpYyB0cmltTGVmdChpbWFnZT8sIGNhbGxiYWNrPykge1xuICAgICAgICByZXR1cm4gbmV3IFRyaW1JbWFnZShpbWFnZSwgY2FsbGJhY2spLnRyaW1MZWZ0KCk7XG4gICAgfVxuXG4gICAgc3RhdGljIHRyaW1SaWdodChpbWFnZT8sIGNhbGxiYWNrPykge1xuICAgICAgICByZXR1cm4gbmV3IFRyaW1JbWFnZShpbWFnZSwgY2FsbGJhY2spLnRyaW1SaWdodCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiAtIEVsaW1pbmEgcGl4ZWxlcyBpbm5lY2VzYXJpb3MgcGFyYSB0b2RvcyBsb3MgYm9yZGVzIGRlIGxhIGltYWdlblxuICAgICAqL1xuICAgIHRyaW0oKSB7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBJbWFnZURhdGFIZWxwZXIuZ2V0SW1hZ2UoXG4gICAgICAgICAgICB0aGlzLl90cmltKEltYWdlRGF0YUhlbHBlci5nZXRJbWFnZURhdGEodGhpcy5pbWFnZSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIC0gRWxpbWluYSBwaXhlbGVzIGlubmVjZXNhcmlvcyBwYXJhIGVsIGJvcmRlIHN1cGVyaW9yIGRlIGxhIGltYWdlblxuICAgICAqIEBwYXJhbSBbaW1hZ2Ugb2JqZWN0XSBpbWFnZSAtIFBhcmFtZXRybyBvcGNpb25hbCB0aXBvIEltYWdlXG4gICAgICogQHJldHVybiBbaW1hZ2Ugb2JqZWN0LCB0aGlzXSAtIFJldG9ybmEgdGhpcyBzaSBlbCBwYXJhbWV0cm8gZXMgaW5kZWZpbmlkb1xuICAgICAqL1xuICAgIHRyaW1Ub3AoKSB7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBJbWFnZURhdGFIZWxwZXIuZ2V0SW1hZ2UoXG4gICAgICAgICAgICB0aGlzLl90cmltVG9wKEltYWdlRGF0YUhlbHBlci5nZXRJbWFnZURhdGEodGhpcy5pbWFnZSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIC0gRWxpbWluYSBwaXhlbGVzIGlubmVjZXNhcmlvcyBwYXJhIGVsIGJvcmRlIGluZmVyaW9yIGRlIGxhIGltYWdlblxuICAgICAqIEBwYXJhbSBbaW1hZ2Ugb2JqZWN0XSBpbWFnZSAtIFBhcmFtZXRybyBvcGNpb25hbCB0aXBvIEltYWdlXG4gICAgICogQHJldHVybiBbaW1hZ2Ugb2JqZWN0LCB0aGlzXSAtIFJldG9ybmEgdGhpcyBzaSBlbCBwYXJhbWV0cm8gZXMgaW5kZWZpbmlkb1xuICAgICAqL1xuICAgIHRyaW1Cb3R0b20oKSB7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBJbWFnZURhdGFIZWxwZXIuZ2V0SW1hZ2UoXG4gICAgICAgICAgICB0aGlzLl90cmltQm90dG9tKEltYWdlRGF0YUhlbHBlci5nZXRJbWFnZURhdGEodGhpcy5pbWFnZSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIC0gRWxpbWluYSBwaXhlbGVzIGlubmVjZXNhcmlvcyBwYXJhIGVsIGJvcmRlIGl6cXVpZXJkbyBkZSBsYSBpbWFnZW5cbiAgICAgKiBAcGFyYW0gW2ltYWdlIG9iamVjdF0gaW1hZ2UgLSBQYXJhbWV0cm8gb3BjaW9uYWwgdGlwbyBJbWFnZVxuICAgICAqIEByZXR1cm4gW2ltYWdlIG9iamVjdCwgdGhpc10gLSBSZXRvcm5hIHRoaXMgc2kgZWwgcGFyYW1ldHJvIGVzIGluZGVmaW5pZG9cbiAgICAgKi9cbiAgICB0cmltTGVmdCgpIHtcbiAgICAgICAgdGhpcy5pbWFnZSA9IEltYWdlRGF0YUhlbHBlci5nZXRJbWFnZShcbiAgICAgICAgICAgIHRoaXMuX3RyaW1MZWZ0KEltYWdlRGF0YUhlbHBlci5nZXRJbWFnZURhdGEodGhpcy5pbWFnZSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIC0gRWxpbWluYSBwaXhlbGVzIGlubmVjZXNhcmlvcyBwYXJhIGVsIGJvcmRlIGRlcmVjaG8gZGUgbGEgaW1hZ2VuXG4gICAgICogQHJldHVybnMge3RoaXN9XG4gICAgICovXG4gICAgdHJpbVJpZ2h0KCk6IHRoaXMge1xuICAgICAgICB0aGlzLmltYWdlID0gSW1hZ2VEYXRhSGVscGVyLmdldEltYWdlKFxuICAgICAgICAgICAgdGhpcy5fdHJpbVJpZ2h0KEltYWdlRGF0YUhlbHBlci5nZXRJbWFnZURhdGEodGhpcy5pbWFnZSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIC0gRWxpbWluYSBwaXhlbGVzIGRlIGxhIGltYWdlbiBpbm5lY2VzYXJpb3NcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7SW1hZ2VEYXRhfSBpbWFnZURhdGFcbiAgICAgKiBAcmV0dXJucyB7SW1hZ2VEYXRhfVxuICAgICAqL1xuICAgIHByaXZhdGUgX3RyaW0oaW1hZ2VEYXRhOiBJbWFnZURhdGEpOiBJbWFnZURhdGEge1xuICAgICAgICBJbWFnZURhdGFIZWxwZXIudmFsaWRhdGUoaW1hZ2VEYXRhKTtcblxuICAgICAgICBsZXQgdHJpbW1lZEltYWdlID0gdGhpcy5fdHJpbVRvcChpbWFnZURhdGEpO1xuICAgICAgICB0cmltbWVkSW1hZ2UgPSB0aGlzLl90cmltQm90dG9tKHRyaW1tZWRJbWFnZSk7XG4gICAgICAgIHRyaW1tZWRJbWFnZSA9IHRoaXMuX3RyaW1MZWZ0KHRyaW1tZWRJbWFnZSk7XG4gICAgICAgIHRyaW1tZWRJbWFnZSA9IHRoaXMuX3RyaW1SaWdodCh0cmltbWVkSW1hZ2UpO1xuXG4gICAgICAgIHJldHVybiB0cmltbWVkSW1hZ2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0ltYWdlRGF0YX0gaW1hZ2VEYXRhXG4gICAgICogQHJldHVybnMge0ltYWdlRGF0YX1cbiAgICAgKi9cbiAgICBwcml2YXRlIF90cmltVG9wKGltYWdlRGF0YTogSW1hZ2VEYXRhKTogSW1hZ2VEYXRhIHtcbiAgICAgICAgbGV0IHJvdyA9IDA7XG4gICAgICAgIGxldCBsZW5naHRDb2wgPSBpbWFnZURhdGEud2lkdGggKiA0O1xuICAgICAgICBsZXQgbGVuZ2h0Um93ID0gaW1hZ2VEYXRhLmhlaWdodDtcblxuICAgICAgICB0aGlzLnJlYWRJbWFnZURhdGEoXG4gICAgICAgICAgICBUeXBlUmVhZGVyLlRPUCxcbiAgICAgICAgICAgIGltYWdlRGF0YSxcbiAgICAgICAgICAgIChfcm93LCBfY29sLCByZ2JhOiBDb2xvclJHQkEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmdiYS5hbHBoYSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IF9yb3c7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdicmVhayc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmN1dEltYWdlRGF0YShpbWFnZURhdGEsIHJvdywgMCwgbGVuZ2h0Um93LCBsZW5naHRDb2wpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtJbWFnZURhdGF9IGltYWdlRGF0YVxuICAgICAqIEByZXR1cm5zIHtJbWFnZURhdGF9XG4gICAgICovXG4gICAgcHJpdmF0ZSBfdHJpbUJvdHRvbShpbWFnZURhdGE6IEltYWdlRGF0YSk6IEltYWdlRGF0YSB7XG4gICAgICAgIGxldCBsZW5naHRSb3cgPSBpbWFnZURhdGEuaGVpZ2h0O1xuICAgICAgICBsZXQgbGVuZ2h0Q29sID0gaW1hZ2VEYXRhLndpZHRoICogNDtcblxuICAgICAgICB0aGlzLnJlYWRJbWFnZURhdGEoXG4gICAgICAgICAgICBUeXBlUmVhZGVyLkJPVFRPTSxcbiAgICAgICAgICAgIGltYWdlRGF0YSxcbiAgICAgICAgICAgIChfcm93LCBfY29sLCByZ2JhOiBDb2xvclJHQkEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmdiYS5hbHBoYSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlbmdodFJvdyA9IF9yb3c7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdicmVhayc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmN1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDAsIGxlbmdodFJvdywgbGVuZ2h0Q29sKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7SW1hZ2VEYXRhfSBpbWFnZURhdGFcbiAgICAgKiBAcmV0dXJucyB7SW1hZ2VEYXRhfVxuICAgICAqL1xuICAgIHByaXZhdGUgX3RyaW1MZWZ0KGltYWdlRGF0YTogSW1hZ2VEYXRhKTogSW1hZ2VEYXRhIHtcbiAgICAgICAgbGV0IGNvbHVtbiA9IDA7XG4gICAgICAgIGxldCBsZW5naHRDb2wgPSBpbWFnZURhdGEud2lkdGggKiA0O1xuICAgICAgICBsZXQgbGVuZ2h0Um93ID0gaW1hZ2VEYXRhLmhlaWdodDtcblxuICAgICAgICB0aGlzLnJlYWRJbWFnZURhdGEoXG4gICAgICAgICAgICBUeXBlUmVhZGVyLkxFRlQsXG4gICAgICAgICAgICBpbWFnZURhdGEsXG4gICAgICAgICAgICAoX3JvdywgX2NvbCwgcmdiYTogQ29sb3JSR0JBKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJnYmEuYWxwaGEgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBfY29sO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnYnJlYWsnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5jdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCBjb2x1bW4sIGxlbmdodFJvdywgbGVuZ2h0Q29sKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7SW1hZ2VEYXRhfSBpbWFnZURhdGFcbiAgICAgKiBAcmV0dXJucyB7SW1hZ2VEYXRhfVxuICAgICAqL1xuICAgIHByaXZhdGUgX3RyaW1SaWdodChpbWFnZURhdGE6IEltYWdlRGF0YSk6IEltYWdlRGF0YSB7XG4gICAgICAgIGxldCBsZW5Db2wgPSBpbWFnZURhdGEud2lkdGggKiA0O1xuICAgICAgICBsZXQgbGVuUm93ID0gaW1hZ2VEYXRhLmhlaWdodDtcblxuICAgICAgICB0aGlzLnJlYWRJbWFnZURhdGEoXG4gICAgICAgICAgICBUeXBlUmVhZGVyLlJJR0hULFxuICAgICAgICAgICAgaW1hZ2VEYXRhLFxuICAgICAgICAgICAgKF9yb3csIF9jb2wsIHJnYmE6IENvbG9yUkdCQSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZ2JhLmFscGhhICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGVuQ29sID0gX2NvbDtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2JyZWFrJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY3V0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCwgbGVuUm93LCBsZW5Db2wpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SW1hZ2VEYXRhfSBpbWFnZURhdGFcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm93SW5pXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbEluaVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dGaW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29sRmluXG4gICAgICogQHJldHVybnMge0ltYWdlRGF0YX1cbiAgICAgKi9cbiAgICBjdXRJbWFnZURhdGEoXG4gICAgICAgIGltYWdlRGF0YTogSW1hZ2VEYXRhLFxuICAgICAgICByb3dJbmk6IG51bWJlcixcbiAgICAgICAgY29sSW5pOiBudW1iZXIsXG4gICAgICAgIHJvd0ZpbjogbnVtYmVyLFxuICAgICAgICBjb2xGaW46IG51bWJlclxuICAgICk6IEltYWdlRGF0YSB7XG4gICAgICAgIEltYWdlRGF0YUhlbHBlci52YWxpZGF0ZShpbWFnZURhdGEpO1xuXG4gICAgICAgIGxldCBwaXhlbHMgPSBpbWFnZURhdGEuZGF0YTtcbiAgICAgICAgbGV0IGxlbl9jb2wgPSBpbWFnZURhdGEud2lkdGggKiA0O1xuXG4gICAgICAgIHJvd0ZpbiA9IHJvd0ZpbiA9PSAwID8gMSA6IHJvd0ZpbjtcbiAgICAgICAgY29sRmluID0gY29sRmluID09IDAgPyAxIDogY29sRmluO1xuXG4gICAgICAgIGxldCBjb3B5SGVpZ2h0ID0gcm93RmluID09IHJvd0luaSA/IDEgOiByb3dGaW4gLSByb3dJbmk7XG4gICAgICAgIGxldCBjb3B5V2lkdGggPSBjb2xGaW4gLyA0IC0gY29sSW5pIC8gNDtcblxuICAgICAgICBsZXQgY29weUltYWdlRGF0YTogSW1hZ2VEYXRhID0gSW1hZ2VEYXRhSGVscGVyLmNyZWF0ZShcbiAgICAgICAgICAgIGNvcHlXaWR0aCxcbiAgICAgICAgICAgIGNvcHlIZWlnaHRcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgZGlmZkNvbCA9IGxlbl9jb2wgLSBjb2xGaW47XG4gICAgICAgIGxldCBjb3VudENvcHkgPSAwO1xuXG4gICAgICAgIGZvciAobGV0IHJvdyA9IHJvd0luaTsgcm93IDwgcm93RmluOyByb3crKykge1xuICAgICAgICAgICAgbGV0IHJvd0N1cnJlbnQgPSByb3cgKiBjb2xGaW4gKyByb3cgKiBkaWZmQ29sO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb2wgPSBjb2xJbmk7IGNvbCA8IGNvbEZpbjsgY29sICs9IDQsIGNvdW50Q29weSArPSA0KSB7XG4gICAgICAgICAgICAgICAgY29weUltYWdlRGF0YS5kYXRhW2NvdW50Q29weV0gPSBwaXhlbHNbcm93Q3VycmVudCArIGNvbF07XG4gICAgICAgICAgICAgICAgY29weUltYWdlRGF0YS5kYXRhW2NvdW50Q29weSArIDFdID1cbiAgICAgICAgICAgICAgICAgICAgcGl4ZWxzW3Jvd0N1cnJlbnQgKyBjb2wgKyAxXTtcbiAgICAgICAgICAgICAgICBjb3B5SW1hZ2VEYXRhLmRhdGFbY291bnRDb3B5ICsgMl0gPVxuICAgICAgICAgICAgICAgICAgICBwaXhlbHNbcm93Q3VycmVudCArIGNvbCArIDJdO1xuICAgICAgICAgICAgICAgIGNvcHlJbWFnZURhdGEuZGF0YVtjb3VudENvcHkgKyAzXSA9XG4gICAgICAgICAgICAgICAgICAgIHBpeGVsc1tyb3dDdXJyZW50ICsgY29sICsgM107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29weUltYWdlRGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7VHlwZVJlYWRlcn0gdHlwZVJlYWRlclxuICAgICAqIEBwYXJhbSB7SW1hZ2VEYXRhfSBpbWFnZURhdGFcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jQmFja1xuICAgICAqIEByZXR1cm5zIHtJbWFnZURhdGF9XG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkSW1hZ2VEYXRhKFxuICAgICAgICB0eXBlUmVhZGVyOiBUeXBlUmVhZGVyLFxuICAgICAgICBpbWFnZURhdGE6IEltYWdlRGF0YSxcbiAgICAgICAgZnVuY0JhY2tcbiAgICApOiBJbWFnZURhdGEge1xuICAgICAgICBJbWFnZURhdGFIZWxwZXIudmFsaWRhdGUoaW1hZ2VEYXRhKTtcblxuICAgICAgICBsZXQgcGl4ZWxzID0gaW1hZ2VEYXRhLmRhdGE7XG4gICAgICAgIGxldCBsZW5Db2wgPSBpbWFnZURhdGEud2lkdGggKiA0O1xuICAgICAgICBsZXQgbGVuUm93ID0gaW1hZ2VEYXRhLmhlaWdodDtcblxuICAgICAgICBsZXQgcmVhZGVyID0ge1xuICAgICAgICAgICAgW1R5cGVSZWFkZXIuVE9QXTogUmVhZGVyVG9wLmFwcGx5LFxuICAgICAgICAgICAgW1R5cGVSZWFkZXIuQk9UVE9NXTogUmVhZGVyQm90dG9tLmFwcGx5LFxuICAgICAgICAgICAgW1R5cGVSZWFkZXIuTEVGVF06IFJlYWRlckxlZnQuYXBwbHksXG4gICAgICAgICAgICBbVHlwZVJlYWRlci5SSUdIVF06IFJlYWRlclJpZ2h0LmFwcGx5XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVhZGVyW3R5cGVSZWFkZXJdKHBpeGVscywgbGVuUm93LCBsZW5Db2wsIGZ1bmNCYWNrKTtcblxuICAgICAgICByZXR1cm4gaW1hZ2VEYXRhO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=